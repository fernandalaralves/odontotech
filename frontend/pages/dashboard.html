<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Sistema Odontológico</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar navbar-dark bg-primary">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Sistema Odontológico</span>
        <div class="d-flex gap-3">
          <a href="dashboard.html" class="btn btn-light btn-sm">Dashboard</a>
          <a href="pacientes.html" class="btn btn-outline-light btn-sm"
            >Pacientes</a
          >
          <a href="dentistas.html" class="btn btn-outline-light btn-sm"
            >Dentistas</a
          >
          <a href="consultas.html" class="btn btn-outline-light btn-sm"
            >Consultas</a
          >
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <h2 class="mb-4">Dashboard</h2>

      <div class="row g-4">
        <div class="col-md-3">
          <div class="card bg-primary text-white">
            <div class="card-body text-center">
              <h5>Pacientes</h5>
              <h2 id="totalPacientes">0</h2>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-success text-white">
            <div class="card-body text-center">
              <h5>Dentistas</h5>
              <h2 id="totalDentistas">0</h2>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-info text-white">
            <div class="card-body text-center">
              <h5>Consultas</h5>
              <h2 id="totalConsultas">0</h2>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-warning text-white">
            <div class="card-body text-center">
              <h5>Hoje</h5>
              <h2 id="consultasHoje">0</h2>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const API_URL = "http://localhost:3000/api";

      async function carregarDados() {
        try {
          const [pacientes, dentistas, consultas] = await Promise.all([
            fetch(`${API_URL}/pacientes`).then((r) => r.json()),
            fetch(`${API_URL}/dentistas`).then((r) => r.json()),
            fetch(`${API_URL}/consultas`).then((r) => r.json()),
          ]);

          document.getElementById("totalPacientes").textContent =
            pacientes.data.length;
          document.getElementById("totalDentistas").textContent =
            dentistas.data.length;
          document.getElementById("totalConsultas").textContent =
            consultas.data.length;
        } catch (error) {
          console.error("Erro ao carregar dados:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", carregarDados);
    </script>
  </body>
</html>
